<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Raza's Snake.io üêç</title>
    <style>
        body { margin: 0; background: #1a1a2e; color: white; font-family: sans-serif; overflow: hidden; touch-action: none; }
        canvas { display: block; background: #16213e; }
        
        /* Stats */
        #ui { position: fixed; top: 10px; left: 10px; z-index: 10; pointer-events: none; }
        .stat-card { background: rgba(0,0,0,0.6); padding: 10px; border-radius: 10px; border: 1px solid #00ffcc; margin-bottom: 5px; }

        /* Joystick */
        #joystick-container { position: fixed; bottom: 50px; left: 50px; width: 120px; height: 120px; background: rgba(255,255,255,0.1); border-radius: 50%; z-index: 20; border: 2px solid rgba(255,255,255,0.3); }
        #joystick-knob { position: absolute; top: 35px; left: 35px; width: 50px; height: 50px; background: #00ffcc; border-radius: 50%; box-shadow: 0 0 15px #00ffcc; }

        /* Menu */
        #menu { position: fixed; width: 100%; height: 100%; background: rgba(26, 26, 46, 0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; }
        .btn { padding: 15px 40px; background: #00ffcc; color: #1a1a2e; border: none; border-radius: 30px; font-weight: bold; font-size: 20px; cursor: pointer; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="menu">
        <h1 style="color: #00ffcc; font-size: 40px;">SNAKE.IO RAZA</h1>
        <p>Kill the Bots! Don't hit their bodies!</p>
        <button class="btn" onclick="startGame()">PLAY NOW</button>
    </div>

    <div id="ui">
        <div class="stat-card">Score: <span id="score">0</span></div>
        <div class="stat-card">Kills: <span id="kills">0</span></div>
    </div>

    <div id="joystick-container">
        <div id="joystick-knob"></div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const killsEl = document.getElementById('kills');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let player, bots = [], foods = [];
        let isRunning = false;
        let score = 0, kills = 0;

        class Snake {
            constructor(x, y, color, isBot = false) {
                this.segments = [];
                for(let i=0; i<10; i++) this.segments.push({x: x, y: y});
                this.color = color;
                this.angle = Math.random() * Math.PI * 2;
                this.speed = 3;
                this.radius = 12;
                this.isBot = isBot;
            }

            draw() {
                // Body Drawing (Roundy)
                ctx.fillStyle = this.color;
                for(let i = this.segments.length - 1; i >= 0; i--) {
                    ctx.beginPath();
                    ctx.arc(this.segments[i].x, this.segments[i].y, this.radius - (i*0.2), 0, Math.PI*2);
                    ctx.fill();
                    if(i === 0) { // Head Face
                        ctx.fillStyle = 'white';
                        ctx.beginPath(); // Left Eye
                        ctx.arc(this.segments[i].x - 5, this.segments[i].y - 5, 4, 0, Math.PI*2);
                        ctx.fill();
                        ctx.beginPath(); // Right Eye
                        ctx.arc(this.segments[i].x + 5, this.segments[i].y - 5, 4, 0, Math.PI*2);
                        ctx.fill();
                        ctx.fillStyle = 'black';
                        ctx.beginPath(); ctx.arc(this.segments[i].x - 5, this.segments[i].y - 5, 2, 0, Math.PI*2); ctx.fill();
                        ctx.beginPath(); ctx.arc(this.segments[i].x + 5, this.segments[i].y - 5, 2, 0, Math.PI*2); ctx.fill();
                        ctx.fillStyle = this.color;
                    }
                }
            }

            update() {
                if(this.isBot) {
                    if(Math.random() < 0.05) this.angle += (Math.random() - 0.5);
                    // Collision check for bots (simple)
                    if(this.segments[0].x < 0 || this.segments[0].x > canvas.width) this.angle = Math.PI - this.angle;
                    if(this.segments[0].y < 0 || this.segments[0].y > canvas.height) this.angle = -this.angle;
                }

                const head = {
                    x: this.segments[0].x + Math.cos(this.angle) * this.speed,
                    y: this.segments[0].y + Math.sin(this.angle) * this.speed
                };

                this.segments.unshift(head);
                this.segments.pop();
            }
        }

        function createFood() {
            if(foods.length < 50) {
                foods.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                    radius: 4
                });
            }
        }

        function startGame() {
            document.getElementById('menu').classList.add('hidden');
            player = new Snake(canvas.width/2, canvas.height/2, '#00ffcc');
            for(let i=0; i<5; i++) bots.push(new Snake(Math.random()*canvas.width, Math.random()*canvas.height, '#ff4d4d', true));
            isRunning = true;
            animate();
        }

        // Joystick Logic
        const knob = document.getElementById('joystick-knob');
        const container = document.getElementById('joystick-container');
        container.addEventListener('touchmove', (e) => {
            const rect = container.getBoundingClientRect();
            const touch = e.touches[0];
            const centerX = rect.left + rect.width/2;
            const centerY = rect.top + rect.height/2;
            const dx = touch.clientX - centerX;
            const dy = touch.clientY - centerY;
            player.angle = Math.atan2(dy, dx);
            
            const dist = Math.min(35, Math.sqrt(dx*dx + dy*dy));
            knob.style.transform = `translate(${dx/dist * 35}px, ${dy/dist * 35}px)`;
        });

        container.addEventListener('touchend', () => { knob.style.transform = `translate(0,0)`; });

        function animate() {
            if(!isRunning) return;
            ctx.fillStyle = '#16213e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            createFood();
            foods.forEach((f, i) => {
                ctx.fillStyle = f.color;
                ctx.beginPath(); ctx.arc(f.x, f.y, f.radius, 0, Math.PI*2); ctx.fill();
                // Player eat
                let dist = Math.hypot(player.segments[0].x - f.x, player.segments[0].y - f.y);
                if(dist < 15) {
                    foods.splice(i, 1);
                    score += 5;
                    scoreEl.innerText = score;
                    player.segments.push({...player.segments[player.segments.length-1]});
                }
            });

            player.update();
            player.draw();

            bots.forEach((bot, bIdx) => {
                bot.update();
                bot.draw();

                // Player kill Bot logic
                let dist = Math.hypot(player.segments[0].x - bot.segments[0].x, player.segments[0].y - bot.segments[0].y);
                
                // Head to Body collision (Raza's special request)
                bot.segments.forEach((seg, sIdx) => {
                    if(sIdx > 2) {
                        let d = Math.hypot(player.segments[0].x - seg.x, player.segments[0].y - seg.y);
                        if(d < 10) { isRunning = false; alert("Game Over! Bot hit you!"); location.reload(); }
                    }
                });

                player.segments.forEach((pSeg, pIdx) => {
                    if(pIdx > 2) {
                        let d = Math.hypot(bot.segments[0].x - pSeg.x, bot.segments[0].y - pSeg.y);
                        if(d < 10) {
                            bots.splice(bIdx, 1);
                            kills++;
                            killsEl.innerText = kills;
                            bots.push(new Snake(Math.random()*canvas.width, Math.random()*canvas.height, '#ff4d4d', true));
                        }
                    }
                });
            });

            requestAnimationFrame(animate);
        }
    </script>
</body>
</html>
